<!DOCTYPE HTML>
<html>
  <head>
    <title>User</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css">
</head>
  <body style="margin-top: 10px;">
    <div id="demo" class="container">
      <h3>User: <span id="name"></span></h3>

      <table class="table table-bordered">
        <tbody>
          <tr>
            <td id="x">X</td><td id="y">Y</td><td id="z">Z</td>
          <tr>
        </tbody>
      </table>

      <ul class="list-group">
        <li class="list-group-item">Alice: blah blah blah</li>
        <li class="list-group-item">Alice: blah blah blah</li>
        <li class="list-group-item">Alice: blah blah blah</li>
        <li class="list-group-item">Alice: blah blah blah</li>
      </ul>

      <div class="row">
        <div class="col-md-10">
          <input class="form-control">
        </div>
        <div class="col-md-2">
          <button class="btn btn-primary btn-block">Send</button>
        </div>
      </div>

    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/vue/0.11.0/vue.min.js"></script>
    <script src="mqttws31.js"></script>
    <script src="config.js"></script>
    <script src="common.js"></script>
    <script>
        var topic = config.sango_user + "/data";

        var name = window.location.hash.substr(1);
        $("#name").text(name);

        var sango = new Sango(config.sango_server,
                              config.sango_user, config.sango_pass);
        sango.connect(
            name,
            function(data) {
                sango.subscribe(topic, function(data){
                    $.each(["x", "y", "z"], function(i, val) {
                        var e = $("#" + val);
                        if (data.toLowerCase() == val) {
                            e.addClass("success");
                        } else {
                            e.removeClass("success");
                        }
                    });
                });
            },
            function(data) {console.log('failure'); console.log(data)}
        );
    </script>
  </body>
</html>
